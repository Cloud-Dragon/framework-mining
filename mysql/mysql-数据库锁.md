# mysql-数据库锁





## 按类型划分

### 排它锁

Exclusive Lock，也叫X锁，或者写锁，大多为update,insert,delete操作

### 共享锁

Shared Lock 也叫S锁，或者读锁，大多为select操作

通常加锁可以通过一个表格描述两种锁关系

|      | S      | X    |
| ---- | ------ | ---- |
| S    | 不冲突 | 冲突 |
| X    | 冲突   | 冲突 |

具体解释如下：

- 若数据已加写锁，另外一个写操作到来不能获取锁；另外一个读操作到来不能获取到锁；
- 若数据已加读锁，另外一个写操作到来不能获取锁；另外一个读操作到来可以获取到锁；



## 按粒度划分

表级锁：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高,并发度最低。
行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低,并发度也最高。
页面锁：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般。

### 表锁



### 页锁



### 行锁





间隙锁，意向锁





[MySQL 加锁处理分析](http://hedengcheng.com/?p=771#_Toc374698317)

