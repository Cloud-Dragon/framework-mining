二八定律

热数据和冷数据





直写式（Write Through）：在数据写入数据库后，同时更新缓存，维持数据库与缓存的一致性。这也是当前大多数应用缓存框架如Spring Cache的工作方式。这种实现非常简单，同步好，但效率一般。

回写式（Write Back）：当有数据要写入数据库时，只会更新缓存，然后异步批量的将缓存数据同步到数据库上。这种实现比较复杂，需要较多的应用逻辑，同时可能会产生数据库与缓存的不同步，但效率非常高。

## 缓存中常遇到遇到的问题

按照通常的缓存处理流程，先到缓存中查询缓存

### 缓存雪崩

问题描述

缓存挂了，大量请求直接打到DB

解决

保证Cache服务高可用性

限流

### 缓存穿透

问题描述

获取的key值在DB中不存在，无法缓存Key值，因而每次请求都会穿透缓存，打到DB上，大流量很容易将DB打挂

解决办法 

缓存空数据

布隆过滤器

| 解决方案   | 适用场景                               | 优缺点                                         |
| :--------- | :------------------------------------- | :--------------------------------------------- |
| 缓存空数据 | 1. 数据命中不高2. 数据频繁变化实时性高 | 1.维护简单2.需要更多的缓存空间3.可能数据不一致 |
| 布隆过滤器 | 1. 数据命中不高2. 数据相对固定实时性低 | 1.代码维护复杂2.缓存空间占用少                 |

在访问所有资源(cache, DB)之前，将存在的key用布隆过滤器提前保存起来，做第一层拦截







## 缓存更新

缓存降级

缓存预热



## 缓存实现框架



[Java与CPU缓存是如何亲密接触的](https://mp.weixin.qq.com/s/ODJqoiHYwAhRCMnVjunsbQ)

 

https://www.ibm.com/developerworks/cn/opensource/os-cn-spring-cache/